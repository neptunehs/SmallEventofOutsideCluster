#############################################
# Roll failed
#############################################
namespace = nep_fail

ship_event = {
	id = nep_fail.1
	title = "nep_fail.1.name"
	desc = "nep_fail.1.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	immediate = {
		if = {
			limit = {
				AND = {
					has_global_flag = nep_X_creatures_spawn
					has_global_flag = nep_wohp_spawn
					has_global_flag = nep_omega_spawn
					has_global_flag = nep_deus_spawn
				}
			}
			remove_global_flag = nep_X_creatures_spawn
			remove_global_flag = nep_wohp_spawn
			remove_global_flag = nep_omgea_spawn
			remove_global_flag = nep_deus_spawn
			set_global_flag = nep_SEoOC_side_story_all_spawn
		}
	}
	
	option = {
		name = OK
	}
}


#############################################
# War of heaven primitive
#############################################

namespace = nep_wohp

ship_event = {
	id = nep_wohp.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = nep_wohp_spawn
		owner = { set_country_flag = nep_wohp_player }
		no_scope = {
			spawn_system = {
				min_distance >= 509
				max_distance <= 520
				min_orientation_angle = -84
				max_orientation_angle = -92
				hyperlane = no
				initializer = nep_wohp_init
			}
		}
		event_target:nep_gaia_country = {
			set_country_flag = recently_advanced
		}
		event_target:nep_highlander_country = {
			set_country_flag = recently_advanced
			declare_war = {
				target = event_target:nep_gaia_country
				attacker_war_goal = wg_war_in_heaven_primitive
			}
		}
		solar_system = {
			spawn_natural_wormhole = {
				bypass_type = wormhole
				random_pos = yes
			}
		}
		random_system = {
			limit = {
				has_star_flag = nep_wohp_system
			}
			spawn_natural_wormhole = {
				bypass_type = wormhole
				random_pos = yes
			}
			link_wormholes = root.solar_system
		}
		owner = { country_event = { id = nep_wohp.1000 } }
	}
}

country_event = {
	id = nep_wohp.1000
	title = "nep_wohp.1000.name"
	desc = "nep_wohp.1000.desc"
	picture = GFX_evt_wormhole
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = OK
	}
}

fleet_event = {
	id = nep_wohp.2
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	trigger = {
		owner = { has_country_flag = nep_wohp_player }
		from = { has_star_flag = nep_wohp_system }
	}
	
	immediate = {
		owner = { country_event = { id = nep_wohp.2000 } }
	}
}

country_event = {
	id = nep_wohp.2000
	title = "nep_wohp.2000.name"
	desc = "nep_wohp.2000.desc"
	picture = GFX_evt_fallen_empire
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = OK
	}
}

#When observation station complete
ship_event = {
	id = nep_wohp.3000
	title = "nep_wohp.3000.name"
	desc = "nep_wohp.3000.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ship_bridge
	location = THIS
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	trigger = {
		owner = { has_country_flag = nep_wohp_player }
		solar_system = { has_star_flag = nep_wohp_system }
	}
	
	immediate = {
	
	}
	
	option = {
		name = OK
	}
}

country_event = {
	id = nep_wohp.3
	title = "nep_wohp.3.name"
	desc = "nep_wohp.3.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ship_bridge
	location = FROMFROM.solar_system
	
	is_triggered_only = yes
	
	trigger = {	
		event_target:nep_highlander_country = {
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { 
					exists = this
					is_same_value = root.owner
				}
			}
		}
		NOR = {
			is_hostile = event_target:nep_gaia_country
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	immediate = { }
	
	option = {
		name = nep_wohp.3.a
		trigger = {
			NOT = {
				OR = {
					has_ethic = ethic_gestalt_consciousness
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_fanatic_pacifist
					has_ethic = ethic_fanatic_authoritarian
				}
			}
		}
		hidden_effect = {
			country_event = { id = nep_wohp.4 }
		}
	}
	
	option = {
		name = nep_wohp.3.b
		trigger = {
			NOT = {
				OR = {
					has_ethic = ethic_gestalt_consciousness
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_pacifist
					has_ethic = ethic_fanatic_pacifist
					has_ethic = ethic_fanatic_egalitarian
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
			}
		}
		hidden_effect = {
			country_event = { id = nep_wohp.5 }
		}
	}
	
	option = {
		name = nep_wohp.3.c
		hidden_effect = {
			country_event = { id = nep_wohp.6 }
		}
	}
}

#When you choose Gaia
country_event = {
	id = nep_wohp.4
	title = "nep_wohp.4.name"
	desc = "nep_wohp.4.desc"

	diplomatic = yes
	
	is_triggered_only = yes
		
	picture_event_data = {
		portrait = event_target:nep_gaia_country
		planet_background = event_target:nep_gaia_country
		graphical_culture = event_target:nep_gaia_country
		city_level = event_target:nep_gaia_country
		room = event_target:nep_gaia_country
	}
	
	trigger = {
		NOR = {
			is_hostile = event_target:nep_gaia_country
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.4.a
		response_text = nep_wohp.4.a.response
		is_dialog_only = yes
	}
	
	option = {
		name = nep_wohp.4.b
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = nep_wohp.41 }
		}
	}
}

country_event = {
	id = nep_wohp.41
	title = "nep_wohp.41.name"
	desc = "nep_wohp.41.desc"

	diplomatic = yes
	
	is_triggered_only = yes
		
	picture_event_data = {
		portrait = event_target:nep_gaia_country
		planet_background = event_target:nep_gaia_country
		graphical_culture = event_target:nep_gaia_country
		city_level = event_target:nep_gaia_country
		room = event_target:nep_gaia_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.41.a
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = nep_wohp.6 }
		}
	}
	
	option = {
		name = nep_wohp.41.b
		custom_tooltip = nep_wohp.41.b.tooltip
		enable_special_project = {
			name = nep_gaia_assist_project
			owner = this
			location = event_target:nep_gaia_country.capital_scope
		}
		hidden_effect = {
			country_event = { id = nep_wohp.42 days = 30 random = 60 }
			set_country_flag = nep_gaia_assist
		}
	}
}

country_event = {
	id = nep_wohp.42
	title = "nep_wohp.42.name"
	desc = "nep_wohp.42.desc"
	
	diplomatic = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	picture_event_data = {
		portrait = event_target:nep_gaia_country
		planet_background = event_target:nep_gaia_country
		graphical_culture = event_target:nep_gaia_country
		city_level = event_target:nep_gaia_country
		room = event_target:nep_gaia_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.42.a
		add_resource = {
			energy = -500
			consumer_goods = -250
			alloys = -150
		}
		hidden_effect = {
			set_country_flag = nep_gaia_assist_2
		}
	}
	
	option = {
		name = nep_wohp.42.b
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = nep_wohp.42 days = 60 }
		}
	}
	
	option = {
		name = nep_wohp.42.c
		hidden_effect = {
			country_event = { id = nep_wohp.42 days = 180 }
		}
	}
}

country_event = {
	id = nep_wohp.43
	title = "nep_wohp.43.name"
	desc = "nep_wohp.43.desc"
	
	diplomatic = yes
	
	mean_time_to_happen = {
		days = 90
	}
	
	trigger = {
		has_country_flag = nep_gaia_assist_1
		has_country_flag = nep_gaia_assist_2
		NOT = { has_special_project = nep_gaia_assist_project_2 }
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	picture_event_data = {
		portrait = event_target:nep_gaia_country
		planet_background = event_target:nep_gaia_country
		graphical_culture = event_target:nep_gaia_country
		city_level = event_target:nep_gaia_country
		room = event_target:nep_gaia_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.43.a
		custom_tooltip = nep_wohp.43.a.tooltip
		hidden_effect = {
			enable_special_project = {
				name = nep_gaia_assist_project_2
				owner = this
				location = event_target:nep_highlander_country.capital_scope
			}
		}
	}
}

country_event = {
	id = nep_wohp.44
	title = "nep_wohp.44.name"
	desc = "nep_wohp.44.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	immediate = {
		country_event = { id = nep_wohp.45 days = 10 }
		remove_country_flag = nep_gaia_assist_1
		remove_country_flag = nep_gaia_assist_2
	}
	
	option = {
		name = OK
	}
}
	
country_event = {
	id = nep_wohp.45
	title = "nep_wohp.45.name"
	desc = "nep_wohp.45.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_highlander_country.capital_scope
	
	is_triggered_only = yes
		
	trigger = {
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	immediate = {
		set_country_flag = nep_gaia_assist_war
		event_target:nep_highlander_country.capital_scope = {
			while = {
				count = 10
				create_army = {
					name = "NAME_nep_Gaia_assault_force"
					owner = event_target:nep_gaia_country
					species = event_target:nep_gaia_species
					type = nep_gaia_super_army
				}
			}
		}
		if = {
			limit = { NOT = { is_at_war_with = event_target:nep_highlander_country } }
			declare_war = {
				target = event_target:nep_highlander_country
				attacker_war_goal = wg_war_in_heaven_primitive
			}
		}
	}
	
	option = {
		name = OK
	}
}

country_event = {
	id = nep_wohp.46
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_country_flag = nep_gaia_assist_war
			is_same_value = event_target:nep_gaia_country
		}
		any_country = { has_country_flag = nep_gaia_assist_war }
		FromFrom = { is_same_value = event_target:nep_highlander_country.capital_scope }
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	immediate = {
		set_global_flag = nep_wohp_end
		random_country = {
			limit = { has_country_flag = nep_gaia_assist_war }
			remove_country_flag = nep_gaia_assist_war
			country_event = { id = nep_wohp.460 }
			country_event = { id = nep_wohp.48 days = 720 random = 360 }
		}
		fromfrom = {
			set_owner = event_target:nep_gaia_country
		}
	}
}

country_event = {
	id = nep_wohp.460
	title = "nep_wohp.460.name"
	desc = "nep_wohp.460.desc"
	picture = GFX_evt_victorious_army
	show_sound = event_ground_battle
	location = event_target:nep_gaia_country.capital_scope
	
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = OK
	}
}

country_event = {
	id = nep_wohp.47
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_country_flag = nep_gaia_assist_war
			is_same_value = event_target:nep_gaia_country
		}
		any_country = { has_country_flag = nep_gaia_assist_war }
		FromFrom = { is_same_value = event_target:nep_highlander_country.capital_scope }
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	immediate = {
		random_country = {
			limit = { has_country_flag = nep_gaia_assist_war }
			remove_country_flag = nep_gaia_assist_war
			country_event = { id = nep_wohp.470 }
			country_event = { id = nep_wohp.42 days = 30 random = 60 }
		}
	}
}

country_event = {
	id = nep_wohp.470
	title = "nep_wohp.470.name"
	desc = "nep_wohp.470.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_highlander_country.capital_scope
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	immediate = { }
	
	option = {
		name = nep_wohp.470.a
		enable_special_project = {
			name = nep_gaia_assist_project
			owner = this
			location = event_target:nep_gaia_country.capital_scope
		}
	}
}

country_event = {
	id = nep_wohp.48
	title = "nep_wohp.48.name"
	desc = "nep_wohp.48.desc"
	picture = GFX_evt_metropolis
	show_sound = event_laboratory_sound
	location = event_target:nep_gaia_country.capital_scope
	
	is_triggered_only = yes
	
	trigger = {
		event_target:nep_gaia_country = {
			capital_scope = {
				exists = this
				is_planet_class = pc_nuked
				OR = {
					NOT = { exists = controller	}
					controller = { is_same_value = event_target:nep_gaia_country }
				}
			}
		}
		NOT = {
			is_hostile = event_target:nep_gaia_country
		}
	}
	
	immediate = {
		remove_country_flag = nep_wohp_player
		remove_country_flag = nep_wohp_see_resistance
		remove_country_flag = nep_wohp_see_colosseum
		event_target:nep_gaia_country.capital_scope = {
			solar_system = {
				every_system_planet = {
					limit = { has_observation_outpost = yes }
					observation_outpost_owner = {
						# Xenoist Faction Enlightenment Demand
						set_timed_country_flag = {
							flag = recent_enlightenment_timed
							days = 7200 # 20 years
						}
					}
					observation_outpost = {
						dismantle = yes
					}
				}
			}
			owner = { save_event_target_as = primitive_country }
			solar_system = {
				if = {
					limit = {
						starbase = { owner = { is_same_value = root } }
					}
					starbase = {
						set_owner = event_target:primitive_country
					}
				}
				every_system_planet = {
					limit = {
						exists = owner
						owner = { is_same_value = root }
					}
					set_owner = event_target:primitive_country			
				}
			}
			change_pc = pc_gaia
			set_planet_entity = { entity = pc_gaia }
		}
		event_target:primitive_country = {
			remove_country_flag = recently_advanced
			set_country_flag = early_space_age
			country_event = { id = primitive.16 }
			change_government = {
				authority = auth_democratic
				civics = {
					civic = civic_free_haven
					civic = civic_post_apocalyptic
				}
			}
			set_name = "NAME_nep_Gaia_Republic"
			add_opinion_modifier = { who = root modifier = nep_you_are_our_Savior }
			if = {
				limit = {
					root = { is_country_type = default }
				}
				if = {
					limit = {
						root = { has_valid_civic = "civic_inwards_perfection" }
					}
					set_subject_of = {
						who = root
						subject_type = tributary
					}
				}			
				else = {
					set_subject_of = {
						who = root
						subject_type = protectorate
					}
				}
			}
			give_technology = { tech = tech_gaia_super_weapon message = no }
			give_technology = { tech = tech_wormhole_stabilization message = no }
			capital_scope = {
				solar_system = {
					every_system_planet = {
						limit = { 
							exists = owner 
						}
						add_modifier = {
							modifier = nep_black_technologies
							days = -1
						}
					}
				}
			}
			#science
			create_fleet = {
				effect = {
					set_owner = event_target:nep_gaia_country

					create_ship = {
						name = random
						random_existing_design = science
					}

					set_fleet_stance = evasive				
					set_location = event_target:nep_gaia_country.capital_scope
					
					owner = {
						create_leader = {
							class = scientist
							sub_type = survey
							name = random
							species = owner_main_species
						}
					}
					set_leader = last_created_leader
				}			
			}				
			#constructor
			create_fleet = {
				effect = {
					set_owner = event_target:nep_gaia_country
					
					create_ship = {
						name = random
						random_existing_design = constructor
					}
					
					set_fleet_stance = evasive
					set_location = event_target:nep_gaia_country.capital_scope
				}
			}
			event_target:nep_gaia_country = {
				destroy_country = yes
			}
		}
		event_target:nep_highlander_country = {
			destroy_country = yes
		}
	}
	
	option = {
		name = "observation.2000.a"
		add_research_option = tech_gaia_super_weapon
	}
}

#When you choose Highlander
country_event = {
	id = nep_wohp.5
	title = "nep_wohp.5.name"
	desc = "nep_wohp.5.desc"

	diplomatic = yes
	
	trigger = {
		NOR = {
			is_hostile = event_target:nep_gaia_country
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	is_triggered_only = yes
		
	picture_event_data = {
		portrait = event_target:nep_highlander_country
		planet_background = event_target:nep_highlander_country
		graphical_culture = event_target:nep_highlander_country
		city_level = event_target:nep_highlander_country
		room = event_target:nep_highlander_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.5.a
		response_text = nep_wohp.5.a.response
		is_dialog_only = yes
	}
	
	option = {
		name = nep_wohp.5.b
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = nep_wohp.51 }
		}
	}
}

country_event = {
	id = nep_wohp.51
	title = "nep_wohp.51.name"
	desc = "nep_wohp.51.desc"

	diplomatic = yes
	
	is_triggered_only = yes
		
	picture_event_data = {
		portrait = event_target:nep_highlander_country
		planet_background = event_target:nep_highlander_country
		graphical_culture = event_target:nep_highlander_country
		city_level = event_target:nep_highlander_country
		room = event_target:nep_highlander_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.51.a
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = nep_wohp.6 }
		}
	}
	
	option = {
		name = nep_wohp.51.b
		enable_special_project = {
			name = nep_highlander_conquer_project
			owner = this
			location = event_target:nep_gaia_country.capital_scope
		}
		hidden_effect = {
			country_event = { id = nep_wohp.52 days = 30 random = 60 }
			set_country_flag = nep_highlander_assist
		}
	}
}

country_event = {
	id = nep_wohp.52
	title = "nep_wohp.52.name"
	desc = "nep_wohp.52.desc"
	
	diplomatic = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	picture_event_data = {
		portrait = event_target:nep_highlander_country
		planet_background = event_target:nep_highlander_country
		graphical_culture = event_target:nep_highlander_country
		city_level = event_target:nep_highlander_country
		room = event_target:nep_highlander_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.52.a
		add_resource = {
			energy = -1000
			consumer_goods = -300
		}
		hidden_effect = {
			set_country_flag = nep_highlander_assist_2
		}
	}
	
	option = {
		name = nep_wohp.42.b
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = nep_wohp.52 days = 60 }
		}
	}
	
	option = {
		name = nep_wohp.42.c
		hidden_effect = {
			country_event = { id = nep_wohp.52 days = 180 }
		}
	}
}

country_event = {
	id = nep_wohp.53
	title = "nep_wohp.53.name"
	desc = "nep_wohp.53.desc"
	
	diplomatic = yes
	
	mean_time_to_happen = {
		days = 90
	}
	
	trigger = {
		has_country_flag = nep_highlander_assist_1
		has_country_flag = nep_highlander_assist_2
		NOT = { has_special_project = nep_highlander_conquer_project_2 }
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	picture_event_data = {
		portrait = event_target:nep_highlander_country
		planet_background = event_target:nep_highlander_country
		graphical_culture = event_target:nep_highlander_country
		city_level = event_target:nep_highlander_country
		room = event_target:nep_highlander_country
	}
	
	immediate = {
	
	}
	
	option = {
		name = nep_wohp.53.a
		hidden_effect = {
			enable_special_project = {
				name = nep_highlander_conquer_project_2
				owner = this
				location = event_target:nep_gaia_country.capital_scope
			}
		}
	}
}

country_event = {
	id = nep_wohp.54
	title = "nep_wohp.54.name"
	desc = "nep_wohp.54.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	immediate = {
		country_event = { id = nep_wohp.55 days = 10 }
		remove_country_flag = nep_highlander_assist_1
		remove_country_flag = nep_highlander_assist_2
	}
	
	option = {
		name = OK
	}
}
	
country_event = {
	id = nep_wohp.55
	title = "nep_wohp.55.name"
	desc = "nep_wohp.55.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_gaia_country.capital_scope
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
		
	immediate = {
		set_country_flag = nep_highlander_assist_war
		event_target:nep_gaia_country.capital_scope = {
			while = {
				count = 10
				create_army = {
					name = "NAME_Gaia_assault_force"
					owner = event_target:nep_highlander_country
					species = event_target:nep_gaia_species
					type = nep_gene_slave_army
				}
			}
		}
		if = {
			limit = { NOT = { is_at_war_with = event_target:nep_gaia_country } }
			declare_war = {
				target = event_target:nep_gaia_country
				attacker_war_goal = wg_war_in_heaven_primitive
			}
		}
	}
	
	option = {
		name = OK
	}
}

country_event = {
	id = nep_wohp.56
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_country_flag = nep_highlander_assist_war
			is_same_value = event_target:nep_highlander_country
		}
		any_country = { has_country_flag = nep_highlander_assist_war }
		FromFrom = { is_same_value = event_target:nep_gaia_country.capital_scope }
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	immediate = {
		set_global_flag = nep_wohp_end
		random_country = {
			limit = { has_country_flag = nep_highlander_assist_war }
			remove_country_flag = nep_highlander_assist_war
			country_event = { id = nep_wohp.560 }
			country_event = { id = nep_wohp.58 days = 720 random = 360 }
		}
		fromfrom = {
			set_owner = event_target:nep_highlander_country
		}
	}
}

country_event = {
	id = nep_wohp.560
	title = "nep_wohp.560.name"
	desc = "nep_wohp.560.desc"
	picture = GFX_evt_victorious_army
	show_sound = event_ground_battle
	location = event_target:nep_highlander_country.capital_scope
	
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = nep_wohp.560.a
	}	
}

country_event = {
	id = nep_wohp.57
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_country_flag = nep_highlander_assist_war
			is_same_value = event_target:nep_highlander_country
		}
		any_country = { has_country_flag = nep_highlander_assist_war }
		FromFrom = { is_same_value = event_target:nep_gaia_country.capital_scope }
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	immediate = {
		random_country = {
			limit = { has_country_flag = nep_highlander_assist_war }
			remove_country_flag = nep_highlander_assist_war
			country_event = { id = nep_wohp.570 }
			country_event = { id = nep_wohp.52 days = 30 random = 60 }
		}
	}
}

country_event = {
	id = nep_wohp.570
	title = "nep_wohp.570.name"
	desc = "nep_wohp.570.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_gaia_country.capital_scope
	
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = nep_wohp.570.a
		enable_special_project = {
			name = nep_highlander_conquer_project
			owner = this
			location = event_target:nep_gaia_country.capital_scope
		}
	}
}

country_event = {
	id = nep_wohp.58
	title = "nep_wohp.58.name"
	desc = "nep_wohp.58.desc"
	picture = GFX_evt_metropolis
	show_sound = event_laboratory_sound
	location = event_target:nep_highlander_country.capital_scope
	
	is_triggered_only = yes
	
	trigger = {		
		event_target:nep_highlander_country = {
			exists = capital_scope
			capital_scope = {
				is_planet_class = pc_habitat
				OR = {
					controller = { is_same_value = event_target:nep_highlander_country }
				}
			}
		}
		NOT = {
			is_hostile = event_target:nep_highlander_country
		}
	}
	
	immediate = {
		remove_country_flag = nep_wohp_player
		remove_country_flag = nep_wohp_see_resistance
		remove_country_flag = nep_wohp_see_colosseum
		event_target:nep_highlander_country.capital_scope = {
			solar_system = {
				every_system_planet = {
					limit = { has_observation_outpost = yes }
					observation_outpost_owner = {
						# Xenoist Faction Enlightenment Demand
						set_timed_country_flag = {
							flag = recent_enlightenment_timed
							days = 7200 # 20 years
						}
					}
					observation_outpost = {
						dismantle = yes
					}
				}
			}
			owner = { save_event_target_as = primitive_country }
			solar_system = {
				if = {
					limit = {
						starbase = { owner = { is_same_value = root } }
					}
					starbase = {
						set_owner = event_target:primitive_country
					}
				}
				every_system_planet = {
					limit = {
						is_planet_class = pc_nuked
					}
					change_pc = pc_shattered
					set_planet_entity = { entity = pc_shattered }
					clear_deposits = yes
					add_deposit = d_minerals_10
					add_deposit = d_energy_6
				}
				every_system_planet = {
					limit = {
						exists = owner
						owner = { is_same_value = root }
					}
					set_owner = event_target:primitive_country			
				}
			}
			set_planet_size = 25
		}
		event_target:primitive_country = {
			set_country_flag = early_space_age
			remove_country_flag = recently_advanced
			remove_country_flag = early_space_age
			set_country_flag = primitives_can_into_space
			set_country_type = default
			change_country_flag = random
			if = {
				limit = { is_species_class = MAM }
				set_graphical_culture = mammalian_01
			}
			if = {
				limit = { is_species_class = REP }
				set_graphical_culture = reptilian_01
			}
			if = {
				limit = { is_species_class = AVI }
				set_graphical_culture = avian_01
			}
			if = {
				limit = { is_species_class = ART }
				set_graphical_culture = arthropoid_01
			}
			if = {
				limit = { is_species_class = MOL }
				set_graphical_culture = molluscoid_01
			}
			if = {
				limit = { is_species_class = FUN }
				set_graphical_culture = fungoid_01
			}
			if = {
				limit = { is_species_class = PLANT }
				set_graphical_culture = plantoid_01
			}
			change_government = {
				authority = auth_imperial
				civics = {
					civic = civic_imperial_cult
					civic = civic_life_seeded
				}
			}
			set_name = "NAME_nep_Highlander_Kingdom"
			add_resource = {
				energy = 500
				minerals = 1000 # enough for a spaceport and then some
				influence = 300
			}
			capital_scope = {
				clear_blockers = yes
				while = {
					limit = { 
						num_pops < 8
						#free_housing > 0
					}
					create_pop = {
						species = owner
					}
				}
				while = {
					limit = { has_building = building_primitive_farm }
					remove_building = building_primitive_farm
				}
				while = {
					limit = { has_building = building_primitive_factory }
					remove_building = building_primitive_factory
				}
				while = {
					limit = { has_building = building_urban_dwellings }
					remove_building = building_urban_dwellings
				}
				while = {
					limit = { has_building = building_primitive_mine }
					remove_building = building_primitive_mine
				}
				while = {
					limit = { has_building = building_primitive_power_plant }
					remove_building = building_primitive_power_plant
				}
				while = {
					count = 10
					create_pop = { species = event_target:nep_gaia_country }
				}
				add_building = building_nep_gaia_emulator
				add_building = building_nep_gaia_emulator
				add_district = district_hab_housing
				add_district = district_hab_housing
				add_district = district_hab_housing
				add_district = district_hab_housing
				add_district = district_hab_cultural
				remove_building = building_primitive_capital
				add_building = building_capital
				add_building = building_research_lab_1
				add_building = building_foundry_1
				add_building = building_factory_1
				
				remove_all_armies = yes
				solar_system = {
					if = {
						limit = {
							NOT = { exists = starbase }
						}
						create_starbase = {
							size = starbase_outpost
							owner = root
						}
					}
					else_if = {
						limit = {
							starbase = {
								NOT = { owner = { is_same_value = root } }
							}
						}	
						starbase = {
							owner = { country_event = { id = primitive.180 days = 10 } }
						}
					}
				}				
			}
			add_opinion_modifier = { who = root modifier = nep_you_are_very_strong }
			if = {
				limit = {
					root = { is_country_type = default }
				}
				if = {
					limit = {
						root = { has_valid_civic = "civic_inwards_perfection" }
					}
					set_subject_of = {
						who = root
						subject_type = tributary
					}
				}			
				else = {
					set_subject_of = {
						who = root
						subject_type = protectorate
					}
				}
			}
			set_country_flag = nep_can_use_gene_slave
			give_technology = { tech = tech_wormhole_stabilization message = no }
			capital_scope = {
				solar_system = {
					every_system_planet = {
						limit = { 
							exists = owner 
						}
						add_modifier = {
							modifier = nep_black_technologies
							days = -1
						}
					}
				}
			}
			event_target:nep_gaia_species = {
				set_citizenship_type = { country = prev type = citizenship_slavery cooldown = no }
			}
			#science
			create_fleet = {
				effect = {
					set_owner = event_target:nep_highlander_country

					create_ship = {
						name = random
						random_existing_design = science
					}

					set_fleet_stance = evasive				
					set_location = event_target:nep_highlander_country.capital_scope
					
					owner = {
						create_leader = {
							class = scientist
							sub_type = survey
							name = random
							species = owner_main_species
						}
					}
					set_leader = last_created_leader
				}			
			}
				
			#constructor
			create_fleet = {
				effect = {
					set_owner = event_target:nep_highlander_country
					
					create_ship = {
						name = random
						random_existing_design = constructor
					}
					
					set_fleet_stance = evasive
					set_location = event_target:nep_highlander_country.capital_scope
				}
			}
			event_target:nep_gaia_country = {
				destroy_country = yes
			}
		}
	}
	
	option = {
		name = "observation.2000.a"
		custom_tooltip = nep_wohp.58.a.tooltip
		hidden_effect = { root = { set_country_flag = nep_can_use_gene_slave } }
	}
}


#When you choose ignore them
country_event = {
	id = nep_wohp.6
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = nep_wohp_end
	}
}

#When invate Gaia
country_event = {
	id = nep_wohp.7
	title = "nep_wohp.7.name"
	desc = "nep_wohp.7.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = fromfrom
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = nep_wohp_end }
		FromFrom = { is_same_value = event_target:nep_gaia_country.capital_scope }
		is_country_type = default
		NOR = {
			has_country_flag = nep_highlander_assist_war
			is_same_value = event_target:nep_highlander_country
		}
	}
	
	immediate = {
		set_global_flag = nep_wohp_end
	}
	
	option = { name = nep_wohp.7.a }
	option = { name = nep_wohp.7.b }
}

#When invate Highland
country_event = {
	id = nep_wohp.8
	title = "nep_wohp.8.name"
	desc = "nep_wohp.8.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = fromfrom
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = nep_wohp_end }
		FromFrom = { is_same_value = event_target:nep_highlander_country.capital_scope }
		is_country_type = default
		NOR = {
			has_country_flag = nep_gaia_assist_war
			is_same_value = event_target:nep_gaia_country
		}
	}
	
	immediate = {
		set_global_flag = nep_wohp_end
	}
	
	option = { name = nep_wohp.8.a }
	option = { name = nep_wohp.8.b }
}

#On_monthly_pulse
event = {
	id = nep_wohp.9
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_wohp_spawn
		NOT = { has_global_flag = nep_wohp_end }
	}
	
	immediate = {
		event_target:nep_gaia_country = {
			capital_scope = {
				if = {
					limit = { planet_devastation > 90 }
					if = { limit = { has_ground_combat = no } add_planet_devastation = -10 }					
				}
				else = {
					random_list = {
						1 = { if = { limit = { has_ground_combat = no } add_planet_devastation = -7 } }
						1 = { if = { limit = { has_ground_combat = no } add_planet_devastation = -4 } }
						1 = { if = { limit = { has_ground_combat = no } add_planet_devastation = -1 } }
						1 = { add_planet_devastation = 1 }
						1 = { add_planet_devastation = 4 }
						1 = { add_planet_devastation = 7 }
						1 = { if = { limit = { has_ground_combat = yes } add_planet_devastation = 5 }  }
					}
				}
				if = {
					limit = {
						count_armies = {
							limit = { army_type = nep_gaia_super_army_defensive }
							count < 12
						}
					}
					create_army = {
						name = "NAME_nep_Gaia_resist_force"
						owner = event_target:nep_gaia_country
						species = event_target:nep_gaia_species
						type = nep_gaia_super_army_defensive
					}
				}
			}
		}
		event_target:nep_highlander_country = {
			capital_scope = {
				if = {
					limit = {
						count_armies = {
							limit = { army_type = nep_gene_slave_army_defensive }
							count < 12
						}
					}
					create_army = {
						name = "NAME_nep_highlander_royal_ashes"
						owner = event_target:nep_highlander_country
						species = event_target:nep_gaia_species
						type = nep_gene_slave_army_defensive
					}
				}
				if = {
					limit = {
						has_observation_outpost = yes
						observation_outpost = { 
							OR = {
								has_mission = technological_enlightenment_1
								has_mission = technological_enlightenment_2
								has_mission = technological_enlightenment_3
								has_mission = technological_enlightenment_4
								has_mission = technological_enlightenment_5
								has_mission = technological_enlightenment_6
								has_mission = technological_enlightenment_7
								has_mission = technological_enlightenment_8
								has_mission = technological_enlightenment_9
							}
							mission_progress > 0.2
						}
					}
					observation_outpost_owner = {
						country_event = { id = nep_wohp.9000 }
					}
				}
			}
		}
	}
}

country_event = {
	id = nep_wohp.9000
	title = "nep_wohp.9000.name"
	desc = "nep_wohp.9000.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_highlander_country.capital_scope

	is_triggered_only = yes
	
	immediate = {
		event_target:nep_highlander_country = { capital_scope = { observation_outpost = { add_mission_progress = -1 } } }
	}
	
	option = {
		name = nep_wohp.9000.a
	}
}

#on_yearly_pulse
event = {
	id = nep_wohp.90
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_wohp_spawn
		NOT = { has_global_flag = nep_wohp_end }
	}
	
	immediate = {
		event_target:nep_gaia_country = {
			capital_scope = {
				planet_event = { id = nep_wohp.92 days = 150 random = 60 }
			}
		}
		event_target:nep_highlander_country = {
			capital_scope = {
				planet_event = { id = nep_wohp.91 days = 15 random = 15 }
			}
		}
	}
}

planet_event = {
	id = nep_wohp.91
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_wohp_spawn
		NOT = { has_global_flag = nep_wohp_end }
		NOT = {
			any_country = {
				has_country_flag = nep_gaia_assist
			}
		}
	}
	
	immediate = {
		while = {
			count = 5
			create_army = {
				name = "NAME_Gaia_assault_force"
				owner = event_target:nep_gaia_country
				species = event_target:nep_gaia_species
				type = nep_gaia_super_army
			}
		}
		solar_system = {
			every_system_planet = {
				limit = { has_observation_outpost = yes }
				observation_outpost_owner = {
					if = {
						limit = { 
							has_country_flag = nep_wohp_player
							NOT = { has_country_flag = nep_wohp_see_resistance } 
						}
						set_country_flag = nep_wohp_see_resistance
						country_event = { id = nep_wohp.910 }
					}
				}
			}
		}
	}
}

country_event = {
	id = nep_wohp.910
	title = "nep_wohp.910.name"
	desc = "nep_wohp.910.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_highlander_country.capital_scope

	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_country_flag = nep_wohp_see_colosseum }
			country_event = { id = nep_wohp.3 days = 5 }
		}
	}
	
	
	option = {
		name = nep_wohp.910.a
		trigger = {
			NOR = { 
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
	}
	option = {
		name = nep_wohp.910.b
		trigger = {
			OR = { 
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
	}
}

planet_event = {
	id = nep_wohp.92
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_wohp_spawn
		NOT = { has_global_flag = nep_wohp_end }
		NOT = {
			any_country = {
				has_country_flag = nep_highlander_assist
			}
		}
	}
	
	immediate = {
		while = {
			count = 5
			create_army = {
				name = "NAME_nep_highlander_gladiators"
				owner = event_target:nep_highlander_country
				species = event_target:nep_gaia_species
				type = nep_gene_slave_army
			}
		}
		solar_system = {
			every_system_planet = {
				limit = { has_observation_outpost = yes }
				observation_outpost_owner = {
					if = {
						limit = {
							has_country_flag = nep_wohp_player
							NOT = { has_country_flag = nep_wohp_see_colosseum } 
						}
						set_country_flag = nep_wohp_see_colosseum
						country_event = { id = nep_wohp.920 }
					}
				}
			}
		}
	}
}

country_event = {
	id = nep_wohp.920
	title = "nep_wohp.920.name"
	desc = "nep_wohp.920.desc"
	picture = GFX_evt_interior_battle
	show_sound = event_ground_battle
	location = event_target:nep_gaia_country.capital_scope

	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_country_flag = nep_wohp_see_resistance }
			country_event = { id = nep_wohp.3 days = 5 }
		}
	}
	
	option = {
		name = nep_wohp.920.a
		trigger = {
			NOR = { 
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
	}
	option = {
		name = nep_wohp.920.b
		trigger = {
			OR = { 
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
	}
}

#############################################
# X
#############################################

namespace = nep_X_creatures
ship_event = {
	id = nep_X_creatures.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = nep_X_creatures_spawn
	}
}
#############################################
# Omega Virus
#############################################
namespace = nep_omega
ship_event = {
	id = nep_omega.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = nep_omega_spawn
	}
}

#############################################
# Deus Ex Machina
#############################################
namespace = nep_deus
ship_event = {
	id = nep_deus.0
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = nep_deus_spawn
		set_spawn_system_batch = begin
		no_scope = {
			spawn_system = {
				min_distance >= 499
				max_distance <= 510
				min_orientation_angle = -124
				max_orientation_angle = -132
				hyperlane = no
				initializer = nep_deus_init_01
			}
		}
		random_system = {
			limit = {
				has_star_flag = nep_deus_system
			}
			while = {
				count = 3
				spawn_system = {
					min_distance >= 10
					max_distance <= 20
					hyperlane = no
					initializer = nep_deus_init_02
				}
			}
			spawn_system = {
				min_distance >= 10
				max_distance <= 20
				min_orientation_angle = -124
				max_orientation_angle = -132
				hyperlane = no
				initializer = nep_deus_init_03
			}
			random_system = {
				limit = { has_star_flag = nep_deus_system_3 }
				while = {
					count = 3
					spawn_system = {
						min_distance >= 10
						max_distance <= 20
						min_orientation_angle = -124
						max_orientation_angle = -132
						hyperlane = no
						initializer = nep_deus_init_04
					}
				}
				save_event_target_as = nep_deus_system_3
			}
			save_global_event_target_as = nep_deus_system
			every_system = {
				limit = { has_star_flag = nep_deus_system_2 }
				add_hyperlane = { from = event_target:nep_deus_system to = this }
			}
			add_hyperlane = { from = event_target:nep_deus_system to = event_target:nep_deus_system_3 }
			random_system = {
				limit = { has_star_flag = nep_deus_system_4 }
				add_hyperlane = { from = event_target:nep_deus_system_3 to = this }
			}
		}
		set_spawn_system_batch = end
		every_system = {
			limit = { has_star_flag = nep_deus_system_2 }
			remove_star_flag = nep_deus_system_2
		}
		every_system = {
			limit = { has_star_flag = nep_deus_system_3 }
			remove_star_flag = nep_deus_system_3
		}
		every_system = {
			limit = { has_star_flag = nep_deus_system_4 }
			remove_star_flag = nep_deus_system_4
		}
		solar_system = {
			spawn_natural_wormhole = {
				bypass_type = wormhole
				random_pos = yes
			}
		}
		random_system = {
			limit = {
				has_star_flag = nep_deus_system
			}
			spawn_natural_wormhole = {
				bypass_type = wormhole
				random_pos = yes
			}
			link_wormholes = root.solar_system
		}
		owner = { country_event = { id = nep_wohp.1000 } }
		random_list = {
			3 = { ship_event = { id = nep_deus.1 } }
			1 = { ship_event = { id = nep_deuspi.1 } }
		}
	}
}


ship_event = {
	id = nep_deus.1
	hide_window = yes
	
	is_triggered_only = yes
		
	immediate = {
		random_system = {
			limit = {
				has_star_flag = nep_deus_system
			}
			random_system_planet = {
				limit = { is_colonizable = yes }
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						trait = trait_nep_servent_of_machina
						trait = trait_charismatic
						trait = random_traits
					}
					homeworld = this
				}
				create_country = {
					name = NAME_nep_Country_of_Machina
					type = default
					auto_delete = yes
					species = last_created
					authority = auth_dictatorial
					civics = {
						civic = civic_nep_deus_ex_machina
						civic = random
					}
					flag = random
					ethos = {
						ethic = ethic_fanatic_spiritualist
						ethic = ethic_authoritarian
					}
				}
				last_created_country = {
					save_global_event_target_as = nep_deus_country
					IF = {
						LIMIT = { host_has_dlc = "Synthetic Dawn Story Pack" }
						create_species = {
							name = random
							class = ROBOT
							portrait = random
							namelist = "AI"
							traits = {
								trait = trait_mechanical
								trait = random_traits
							}
							effect = {
								save_event_target_as = nep_machina_species
							}
						}
						ELSE = {
							create_species = {
								name = random
								class = ROBOT
								portrait = default_robot
								namelist = "AI"
								traits = {
									trait = trait_mechanical
									trait = random_traits
								}
								effect = {
									save_event_target_as = nep_machina_species
								}
							}
						}
					}
					create_leader = {
						class = ruler
						species = event_target:nep_machina_species
						name = random
						skill = 10
						event_leader = yes
					}
					set_leader = last_created_leader
					# last_created_leader = {
						# add_ruler_trait = leader_trait_nep_machina
					# }
				}
				create_colony = {
					owner = event_target:nep_deus_country
					species = event_target:nep_deus_country
				}
				set_capital = yes
			}
		}
		every_system = {
			limit = {
				has_star_flag = nep_deus_system_2
			}
			every_system_planet = {
				limit = { is_colonizable = yes }
				create_colony = {
					owner = event_target:nep_deus_country
					species = event_target:nep_deus_country
				}
			}
		}
		every_system = {
			limit = {
				has_star_flag = nep_deus_system
			}
			create_starbase = {
				owner = event_target:nep_deus_country
				size = starbase_citadel
				module = shipyard
				module = shipyard
			}
		}
		every_system = {
			limit = {
				OR = {
					has_star_flag = nep_deus_system_3
					has_star_flag = nep_deus_system_2
					has_star_flag = nep_deus_system_4
					
				}
			}
			create_starbase = {
				owner = event_target:nep_deus_country
				size = starbase_citadel
				module = shipyard
			}
		}
		event_target:nep_deus_country = {
			random_country = {
				limit = { 
					if = {
						limit = { any_country = { is_ai = no } }
						is_ai = no
					}
					else = {
						always = yes
					}
				}
				save_event_target_as = nep_temp_country
			}
			copy_techs_from = { 
				target = event_target:nep_temp_country
			}
			every_owned_planet = {
				while = {
					count = 5
					create_pop = { species = event_target:nep_deus_country }
				}
			}
			capital_scope = {
				while = {
					count = 5
					create_pop = { species = event_target:nep_deus_country }
				}
				add_building = building_nep_palace_of_machina
			}
			add_resource = {
				food = 2000
				minerals = 4000
				alloys = 2000
				energy = 2000
				consumer_goods = 2000
				influence = 300
			}
		}
	}
}

country_event = {
	id = nep_deus.2000
	title = "nep_wohp.2000.name"
	desc = "nep_deus.2000.desc"
	picture = GFX_evt_city_planet
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = OK
	}
}

country_event = {
	id = nep_deus.2
	hide_window = yes
	
	fire_only_once = yes
		
	trigger = {
		years_passed > 100
		has_global_flag = nep_deus_spawn
		exists = event_target:nep_deus_country
		root = { is_same_value = event_target:nep_deus_country }
	}
	
	mean_time_to_happen = {
		years = 100
	}
	
	immediate = {
		add_modifier = { 
			modifier = nep_deus_malfunction
			days = -1
		}
		set_country_flag = nep_deus_malfunction
		country_event = { id = nep_deus.3 days = 360 random = 360 }
	}
}

event = {
	id = nep_deus.3
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		every_country = {
			limit = { is_country_type = default }
			event_target:nep_deus_country = {
				declare_war = {
					target = prev
					attacker_war_goal = wg_nep_deus_cleaning_war
				}
			}
			country_event = { id = nep_deus.4 }
		}
	}
}

country_event = {
	id = nep_deus.4
	title = nep_deus.4.name
	desc = nep_deus.4.desc
	
	is_triggered_only = yes
	
	diplomatic = yes
	
	picture_event_data = {
		portrait = event_target:nep_deus_country.ruler
		planet_background = event_target:nep_deus_country
		graphical_culture = event_target:nep_deus_country
		city_level = event_target:nep_deus_country
		room = event_target:nep_deus_country
	}
	
	immediate = {
	}
	
	option = {
		name = nep_deus.4.a
		default_hide_option = yes
		hidden_effect = { country_event = { id = nep_deus.4000 days = 5 } }
	}
}

country_event = {
	id = nep_deus.4000
	title = nep_deus.4000.name
	desc = nep_deus.4000.desc
	picture = GFX_evt_sapient_AI
	
	is_triggered_only = yes
	
	immediate = {}
	
	option = {
		name = nep_deus.4000.a
	}
	
	option = {
		name = nep_deus.4000.b
		trigger = {
			is_synthetic_empire = yes
		}
	}
}

country_event = {
	id = nep_deus.5
	title = nep_deus.5.name
	desc = nep_deus.5.desc
	picture = GFX_evt_fleet_from_surface
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_deus_spawn
		From = { is_same_value = event_target:nep_deus_country }
		FROMFROM = { is_same_value = event_target:nep_deus_country.capital_scope }
	}
		
	immediate = {
		FromFrom = {
			remove_building = building_nep_palace_of_machina
		}
		From = {
			remove_country_flag = nep_deus_malfunction
			remove_modifier = nep_deus_malfunction
		}
	}
	
	option = {
		name = nep_deus.5.a
	}
}

#on_yearly_pulse
event = {
	id = nep_deus.9
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		exists = event_target:nep_deus_country
		event_target:nep_deus_country = { has_country_flag = nep_deus_malfunction }
	}
	
	immediate = {
		random_country = {
			limit = { 
				if = {
					limit = { any_country = { is_ai = no } }
					is_ai = no
				}
				else_if = {
					limit = { any_country = { is_fallen_empire = yes } }
					is_fallen_empire = yes
				}
				else = {
					always = yes
				}
			}
			save_event_target_as = nep_temp_country
		}
		event_target:nep_deus_country = {
			if = {
				limit = { tech_unlocked_ratio = { who = event_target:nep_temp_country ratio < 0.85 } }
				add_resource = {
					physics_research = 10000
					society_research = 10000
					engineering_research = 10000
				}
			}
		}
		add_resource = {
			food = 2000
			minerals = 2000
			alloys = 2000
			energy = 2000
			consumer_goods = 2000
		}
		create_fleet = {
			name = random
			effect = {
				set_owner = event_target:nep_temp_country
				while = {
					count = 10
					create_ship = {
						name = random
						random_existing_design = battleship
					}
				}
				set_location = {
					target = event_target:nep_temp_country.capital_scope
					distance = 150
					angle = random
				}
			}
			settings = {
				uses_naval_capacity = no
			}
		}
	}
}

namespace = nep_deuspi
ship_event = {
	id = nep_deuspi.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
	
	}
}

namespace = nep_deuspl
ship_event = {
	id = nep_deuspl.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
	
	}
}

#############################################
# Guide a Girl to the Galaxy
#############################################
namespace = nep_guide
ship_event = {
	id = nep_guide.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = nep_guide_spawn
	}
}

#############################################
# White Goo Crisis
#############################################
namespace = nep_whitegoo
ship_event = {
	id = nep_whitegoo.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = nep_whitegoo_spawn
	}
}