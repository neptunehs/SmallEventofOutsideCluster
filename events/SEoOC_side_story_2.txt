#############################################
# Genesis
#############################################
namespace = nep_genesis
ship_event = {
	id = nep_genesis.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		set_global_flag = nep_genesis_spawn
	}
}

###############################################
# Grand Pirate Centrary
###############################################
namespace = nep_gpc
event = {
	id = nep_gpc.0
	hide_window = yes
	
	trigger = {
		exists = event_target:caravaneer_home_country
		any_playable_country = {
			is_ai = no			
			NOR = {
				has_ethic = ethic_fanatic_xenophobe
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
				has_valid_civic = civic_nep_deus_ex_machina
			}
			has_communications = event_target:caravaneer_home_country
			event_target:caravaneer_home_country = {
				NOT = { is_hostile = prev }
			}
			num_owned_planets >= 3
			fleet_power >= 5000
		}
	}
	
	fire_only_once = yes
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = nep_gpc_spawn
		random_playable_country = {
			limit = { 
				is_ai = no 
				NOR = {
					has_ethic = ethic_fanatic_xenophobe
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_hive_devouring_swarm
					has_valid_civic = civic_machine_terminator
					has_valid_civic = civic_nep_deus_ex_machina
				}
				has_communications = event_target:caravaneer_home_country
				event_target:caravaneer_home_country = {
					NOT = { is_hostile = prev }
				}
				num_owned_planets >= 3
				fleet_power >= 5000
			}
			country_event = { id = nep_gpc.1099 days = 360 random = 5000 }
		}
	}
}

country_event = {
	id = nep_gpc.1099
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_planet = {
			limit = {
				is_colony = yes
				is_capital = no
				owner = {
					is_country_type = default
				}
				distance = {
					source = root.capital_scope
					min_jumps = 5 max_jumps = 25
				}
				solar_system = { has_access_fleet = root }
			}
			save_global_event_target_as = nep_escort_destiny
		}
		if = {
			limit = { exists = event_target:nep_escort_destiny }
			country_event = { id = nep_gpc.1 }
		}
		else = { country_event = { id = nep_gpc.1099 days = 360 random = 5000 } }
	}
}

#Cavaneers
country_event = {
	id = nep_gpc.1
	title = cara_home_main.title
	custom_gui = "enclave_caravaneer_window"
	desc = nep_gpc.1.desc
	
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:caravaneer_home_country
		room = caravaneer_home_room
		planet_background = pc_city
	}
		
	immediate = {
	
	}
	
	option = {
		name = nep_gpc.1.a #agreed
		custom_tooltip = nep_gpc.1.a.tooltip
		hidden_effect = {
			country_event = { id = nep_gpc.1000 } 
		}
	}
	
	option = {
		name = nep_gpc.1.b #refused
		trigger = {
			NOT = { has_ethic = ethic_xenophobe }
		}
		default_hide_option = yes
		set_global_flag = nep_gpc_end
	}
	
	option = {
		name = nep_gpc.1.c #xeno scrums
		trigger = {
			has_ethic = ethic_xenophobe
		}
		default_hide_option = yes
		set_global_flag = nep_gpc_end
	}
}

country_event = {
	id = nep_gpc.1000
	title = cara_home_main.title
	custom_gui = "enclave_caravaneer_window"
	desc = nep_gpc.1000.desc
	
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:caravaneer_home_country
		room = caravaneer_home_room
		planet_background = pc_city
	}
	
	is_triggered_only = yes
	
	immediate = {
		create_species = {
			name = random
			class = random_non_machine
			portrait = random
			traits = random
		}
		create_country = {
			name = "NAME_Caravaneer_Fleet"
			type = caravaneer_fleet
			authority = auth_corporate
			civics = {
				civic = civic_caravaneer_fleet2
			}
			species = last_created
			flag = {
				icon = {
					category = "special"
					file = "caravaneer_02.dds"
				}
				background= {
					category = "backgrounds"
					file = "new_dawn.dds"
				}
				colors={
					"dark_purple"
					"pink"
					"null"
					"null"
				}
			}
			ethos = {
				ethic = ethic_egalitarian
				ethic = ethic_pacifist
				ethic = ethic_xenophile
			}
			ignore_initial_colony_error = yes
			effect = {
				set_country_flag = nep_caravaneer_fleet_country
				set_graphical_culture = caravaneer_01
				save_global_event_target_as = nep_caravaneer_fleet_country
				create_fleet = {
					name = "NAME_Caravaneer_Fleet_fleet"
					settings = { spawn_debris = no }
					effect = {
						set_fleet_stance = passive
						set_formation_scale = 2.5
						set_owner = prev
						create_ship = {
							name = "NAME_Schooner"
							design = NAME_Schooner
						}
						while = {
							count = 10
							create_ship = {
								name = "NAME_Yojimbo"
								design = NAME_Yojimbo
							}
						}
						while = {
							count = 6
							create_ship = {
								name = "NAME_Gunslinger"
								design = NAME_Gunslinger
							}
						}
						set_location = {
							target = root.capital_scope
							angle = 180
							distance = 40
						}
						set_fleet_flag = nep_cara_fleet
						save_global_event_target_as = nep_caravaneer_fleet_fleet
						set_fleet_stance = passive
						prev = {
							set_custom_capital_location = event_target:nep_caravaneer_fleet_fleet
						}
					}
				}
				create_leader = {
					class = ruler
					species = prev
					name = random
					skill = 5
				}
				set_leader = last_created_leader
			}
		}
	}
	
	option = {
		name = OK
		enable_special_project = {
			name = "nep_escort_assignment"
			owner = root
			location = event_target:nep_caravaneer_fleet_fleet
		}
	}
}

country_event = {
	id = nep_gpc.1002
	title = cara_home_main.title
	custom_gui = "enclave_caravaneer_window"
	desc = nep_gpc.1002.desc
	
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:caravaneer_home_country
		room = caravaneer_home_room
		planet_background = pc_city
	}
		
	immediate = {
	
	}
	
	option = {
		name = OK
		default_hide_option = yes
		add_resource = {
			energy = -500
		}
	}
	
	after = {		
		event_target:nep_caravaneer_fleet_country = {
			destroy_country = yes
		}
		set_global_flag = nep_gpc_end
	}
}


country_event = {
	id = nep_gpc.2
	title = cara_home_main.title
	custom_gui = "enclave_caravaneer_window"
	desc = nep_gpc.2.desc
	
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:caravaneer_home_country
		room = caravaneer_home_room
		planet_background = pc_city
	}
		
	immediate = {
	
	}
	
	option = {
		name = OK
	}
	
	after = {
		set_country_flag = nep_escort_country
		event_target:nep_caravaneer_fleet_fleet = {
			auto_move_to_planet = {
				target = event_target:nep_escort_destiny
				clear_auto_move_on_arrival = yes
			}
		}
	}
}

#on_entering_system_fleet
fleet_event = {
	id = nep_gpc.2001
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_gpc_spawn
		NOT = { has_global_flag = nep_gpc_end }
		root = { is_same_value = event_target:nep_caravaneer_fleet_fleet }
	}
	
	immediate = {
		if = {
			limit = {
				solar_system = { has_owner = yes }
			}
			if = {
				limit = {
					solar_system = { trade_protected_value < 5 }
				}
				random_list = {
					2 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
			else_if = {
				limit = {
					solar_system = { trade_protected_value < 20 }
				}
				random_list = {
					4 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
			else_if = {
				limit = {
					solar_system = { trade_protected_value < 30 }
				}
				random_list = {
					6 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
			else_if = {
				limit = {
					solar_system = { trade_protected_value < 40 }
				}
				random_list = {
					8 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
			else_if = {
				limit = {
					solar_system = { trade_protected_value < 50 }
				}
				random_list = {
					10 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
			else_if = {
				limit = {
					solar_system = { trade_protected_value < 60 }
				}
				random_list = {
					12 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
			else_if = {
				limit = {
					solar_system = { trade_protected_value < 70 }
				}
				random_list = {
					14 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
			else_if = {
				limit = {
					solar_system = { trade_protected_value < 80 }
				}
				random_list = {
					16 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
			else_if = {
				limit = {
					solar_system = { trade_protected_value < 90 }
				}
				random_list = {
					18 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
			else_if = {
				limit = {
					solar_system = { trade_protected_value < 100 }
				}
				random_list = {
					20 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
			else_if = {
				limit = {
					solar_system = { trade_protected_value < 110 }
				}
				random_list = {
					22 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
			else_if = {
				limit = {
					solar_system = { trade_protected_value < 120 }
				}
				random_list = {
					24 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
			else_if = {
				limit = {
					solar_system = { trade_protected_value < 130 }
				}
				random_list = {
					26 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
			else_if = {
				limit = {
					solar_system = { trade_protected_value < 140 }
				}
				random_list = {
					28 = {}
					1 = { fleet_event = { id = nep_gpc.2002 } }
				}
			}
		}
		else = {
			random_list = {
				1 = {}
				1 = { fleet_event = { id = nep_gpc.2002 } }
			}
		}
	}
}


fleet_event = {
	id = nep_gpc.2002
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { NOT = { exists = event_target:nep_gpc_species_1 } }
			create_species = {
				name = random
				class = random_non_machine
				portrait = random
				traits = {
					trait = trait_very_strong
					trait = trait_nomadic
					trait = random_traits
				}
			}
			last_created_species = {
				save_global_event_target_as = nep_gpc_species_1			
			}			
		}
		create_country = {
			name = "NAME_Pirates"
			type = pirate
			species = event_target:nep_gpc_species_1
			name_list = "PRT1"
			flag = {
				background = {
					category = "backgrounds"
					file = "00_solid.dds"
				}
				colors ={
					"black"
					"black"
					"null"
					"null"
				}
			}
			effect = {
				save_event_target_as = pirate_band
			}
		}
		event_target:pirate_band = {
			set_name = random
			randomize_flag_symbol = "pirate"
			every_country = {
				establish_communications_no_message = prev
			}
			set_country_flag = nep_gpc_pirate1
			create_leader = {
				class = admiral
				species = owner_main_species
				name = random
				skill = 1
				traits = {
					trait = random_trait
					trait = random_trait
				}
			}
			create_fleet = {
				name = "NAME_Pirate_Fleet"
				effect = {
					set_owner = event_target:pirate_band
					create_pirate_ships_9 = yes
					assign_leader = last_created_leader
					set_location = {
						target = event_target:nep_caravaneer_fleet_fleet
						distance = 250
						angle = random
					}
					set_fleet_stance = aggressive
					set_aggro_range_measure_from = self
					set_aggro_range = 800
				}
			}
		}
	}	
}

#on_fleet_destroyed_perp
country_event = {
	id = nep_gpc.2003
	title = nep_gpc.2003.name
	desc = nep_gpc.2003.desc
	picture = GFX_evt_pirate_armada
	
	trigger = {
		NOT = { has_global_flag = nep_gpc_end }
		from = { has_country_flag = nep_gpc_pirate1 }
	}
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				NOT = { has_global_flag = nep_gpc_stage_2 }
				NOT = { has_global_flag = nep_gpc_2003_temp }
			}
			set_global_flag = nep_gpc_2003_temp
		}
	}
	
	option = {
		name = nep_gpc.2003.a
		trigger = { has_country_flag = nep_escort_country }
		add_resource = {
			energy = -1000
			influence = 50
		}
		hidden_effect = {
			set_global_flag = nep_gpc_end
			remove_global_flag = nep_gpc_2003_temp
		}
	}
	
	option = {
		name = nep_gpc.2003.b
		trigger = { 
			has_global_flag = nep_gpc_2003_temp
			NOT = { has_global_flag = nep_gpc_stage_2 }
		}
		hidden_effect = { 
			set_global_flag = nep_gpc_stage_2
			remove_global_flag = nep_gpc_2003_temp
			country_event = { id = nep_gpc.3 days = 15 random = 15 }
			root.fromfrom.solar_system = { save_global_event_target_as = nep_gpc_stage_2_beginpoint }
		}
	}
	
	option = {
		name = nep_gpc.2003.c
		add_resource = {
			minerals = 80
			energy = 50
		}
		hidden_effect = {
			remove_global_flag = nep_gpc_2003_temp
		}
	}
}

#on_fleet_auto_move_arrival
country_event = {
	id = nep_gpc.2004
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_gpc_spawn
		NOT = { has_global_flag = nep_gpc_end }
		from = { is_same_value = event_target:nep_caravaneer_fleet_fleet }
	}
	
	immediate = {
		random_country = {
			limit = { has_country_flag = nep_escort_country }
			country_event = { id = nep_gpc.2005 }
		}
	}
}

country_event = {
	id = nep_gpc.2005
	title = nep_gpc.2005.name
	desc = nep_gpc.2005.desc
	picture = GFX_evt_caravaneers
	
	
	is_triggered_only = yes
	
	immediate = {}
	
	option = {
		name = nep_gpc.2005.a
		add_resource = {
			energy = 3000
			consumer_goods = 1500
			unity = 1000
			influence = 100
		}
	}
	
	after = {
		remove_country_flag = nep_escort_country	
		event_target:nep_caravaneer_fleet_country = {
			destroy_country = yes
		}
		if = {
			limit = {
				NOT = { has_global_flag = nep_gpc_stage_2 }
				NOT = { has_global_flag = nep_gpc_end }
			}
			set_global_flag = nep_gpc_end
		}
	}
}

country_event = {
	id = nep_gpc.2006
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		fromfrom = { is_same_value = event_target:nep_caravaneer_fleet_fleet }
	}
	
	immediate = {
		random_country = {
			limit = { has_country_flag = nep_escort_country }
			country_event = { id = nep_gpc.2007 }
		}
	}
}

country_event = {
	id = nep_gpc.2007
	title = nep_gpc.2007.name
	desc = nep_gpc.2007.desc
	picture = GFX_evt_exploding_ship
	
	is_triggered_only = yes
		
	immediate = {
		
	}
	
	option = {
		name = nep_gpc.2007.a
		trigger = {
			fromfrom = { 
				OR = {
					is_country_type = default
					is_country_type = dormant_marauders
					is_country_type = awakened_marauders
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
		}
		add_resource = {
			influence = -100
		}
		add_opinion_modifier = { modifier = opinion_nep_you_destroy_our_escort who = root.fromfrom }
	}
	
	option = {
		name = nep_gpc.2007.b
		trigger = {
			fromfrom = { 
				NOR = {
					is_country_type = default
					is_country_type = dormant_marauders
					is_country_type = awakened_marauders
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
		}
		add_resource = {
			influence = -150
		}
	}
	
	after = {
		remove_country_flag = nep_escort_country		
		event_target:nep_caravaneer_fleet_country = {
			destroy_country = yes
		}
		if = {
			limit = {
				AND = {
					NOT = { has_global_flag = nep_gpc_stage_2 }
					NOT = { has_global_flag = nep_gpc_end }
				}
			}
			set_global_flag = nep_gpc_end
		}
	}
}

country_event = {
	id = nep_gpc.3
	title = nep_gpc.3.name
	desc = nep_gpc.3.desc
	picture = GFX_evt_pirate_armada
	
	is_triggered_only = yes
	
	immediate = {
		random_system = {
			limit = {
				nep_st_is_not_outer_or_fe_system = yes
				distance = {
					source = event_target:nep_gpc_stage_2_beginpoint
					min_jumps = 5
					max_jumps = 12
				}
			}
			set_spawn_system_batch = begin
			spawn_system = {
				min_distance >= 20
				max_distance <= 40
				hyperlane = yes
				initializer = "nep_gpc_init_01"
			}
			set_spawn_system_batch = end
		}
		clear_global_event_target = nep_gpc_stage_2_beginpoint
		if = {
			limit = { NOT = { exists = event_target:nep_gpc_species_1 } }
			create_species = {
				name = random
				class = random_non_machine
				portrait = random
				traits = {
					trait = trait_very_strong
					trait = trait_nomadic
					trait = random_traits
				}
			}
			last_created_species = {
				save_global_event_target_as = nep_gpc_species_1			
			}
		}
		random_system = {
			limit = { has_star_flag = nep_gpc_system_1 }
			random_system_planet = {
				save_event_target_as = pirate_home
				create_country = {
					name = "NAME_nep_Grand_Captain_Balfour"
					type = pirate
					species = event_target:nep_gpc_species_1
					name_list = "PRT1"
					flag = {
						background = {
							category = "backgrounds"
							file = "00_solid.dds"
						}
						colors ={
							"black"
							"black"
							"null"
							"null"
						}
					}
					effect = {
						save_event_target_as = pirate_band
					}
				}
				last_created_country = {
					create_leader = {
						class = admiral
						species = owner_main_species
						name = "NAME_nep_Grand_Captain_Balfour"
						skill = 10
						traits = {
							trait = random_trait
							trait = random_trait
						}
					}
					create_fleet = {
						name = "NAME_nep_Grand_Captain_Balfour"
						effect = {
							set_owner = event_target:pirate_band
							create_ship_design = {
								design = "NAME_Pirate_Galleon"
							}
							while = {
								count = 3
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							create_ship_design = {
								design = "NAME_Skull"
							}
							while = {
								count = 18
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							create_ship_design = {
								design = "NAME_Brigand"
							}
							while = {
								count = 18
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							assign_leader = last_created_leader
							set_location = {
								target = event_target:pirate_home
								distance = 10
								angle = random
							}
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = self
							set_aggro_range = 800
						}
					}
					create_fleet = {
						name = "NAME_Pirate_Station"
						effect = {
							set_owner = event_target:pirate_band
							create_ship = {
								name = random
								design = "NAME_Pirate_Nest"
								graphical_culture = "pirate_01"
							}
							set_location = event_target:pirate_home
						}
					}
				}
				event_target:pirate_band = {
					randomize_flag_symbol = "pirate"
					every_country = {
						establish_communications_no_message = prev
					}
					set_country_flag = nep_gpc_grand_captain
				}
			}
		}
	}
	
	option = {
		name = nep_gpc.3.a
	}
}

country_event = {
	id = nep_gpc.3001
	title = nep_gpc.3001.name
	desc = nep_gpc.3001.desc
	picture = GFX_evt_exploding_ship
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	trigger = {
		from = { has_country_flag = nep_gpc_grand_captain }
		fromfromfrom = {
			NOT = { is_ship_size = pirate_station }
		}
	}
	
	immediate = {
		
	}
	
	option = {
		name = nep_gpc.3001.a
		trigger = {
			NOR = {
				has_ethic = ethic_fanatic_xenophile
				has_ethic = ethic_fanatic_pacifist
			}
		}
		add_resource = {
			influence = 50
		}
		hidden_effect = {
			every_playable_country = { country_event = { id = nep_gpc.3002 days = 30 } }
			country_event = { id = nep_gpc.4 days = 120 random = 15 }
			every_playable_country = { country_event = { id = nep_gpc.4001 days = 150 } }
		}
	}
	
	
	option = {
		name = nep_gpc.3001.b
		default_hide_option = yes
		add_resource = {
			influence = 10
		}
		hidden_effect = {
			set_global_flag = nep_gpc_end
		}
	}
}

country_event = {
	id = nep_gpc.3002
	title = nep_gpc.3002.name
	desc = nep_gpc.3002.desc
	picture = GFX_evt_news_room
		
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = nep_gpc.3002.a
	}
}


country_event = {
	id = nep_gpc.4
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = nep_gpc_pirate_waves
		every_playable_country = {
			country_event = { id = nep_gpc.4002 }
		}
		event_target:global_event_country = {
			country_event = { id = nep_gpc.4003 days = 720 random = 360 } #pirate kings
			country_event = { id = nep_gpc.4010 days = 720 random = 360 } #pirates in nobody
		}
		country_event = { id = nep_gpc.4099 days = 3600 random = 3600 } #wave end
	}
}

country_event = {
	id = nep_gpc.4001
	title = nep_gpc.4001.name
	desc = nep_gpc.4001.desc
	picture = GFX_evt_news_room
		
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = nep_gpc.4001.a
		add_modifier = {
			modifier = nep_gpc_piracy
			days = -1
		}
	}
}

country_event = {
	id = nep_gpc.4002
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		remove_country_flag = pirates_spawned
		if = {
			limit = { has_global_flag = nep_gpc_pirate_waves }
			country_event = { id = nep_gpc.4002 days = 360 random = 720 }
		}
	}
}

country_event = {
	id = nep_gpc.4003
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		set_spawn_system_batch = begin
		random_rim_system = {
			spawn_system = {
				min_distance >= 20
				max_distance <= 40
				hyperlane = yes
				initializer = "nep_gpc_init_02"
			}
			random_system = {
				limit = { has_star_flag = nep_gpc_system_2 }
				remove_star_flag = nep_gpc_system_2
				set_star_flag = nep_gpc_tawni_balfour
			}
		}
		random_rim_system = {
			spawn_system = {
				min_distance >= 20
				max_distance <= 40
				hyperlane = yes
				initializer = "nep_gpc_init_02"
			}
			random_system = {
				limit = { has_star_flag = nep_gpc_system_2 }
				remove_star_flag = nep_gpc_system_2
				set_star_flag = nep_gpc_pete_girly
			}
		}
		random_rim_system = {
			spawn_system = {
				min_distance >= 20
				max_distance <= 40
				hyperlane = yes
				initializer = "nep_gpc_init_02"
			}
			random_system = {
				limit = { has_star_flag = nep_gpc_system_2 }
				remove_star_flag = nep_gpc_system_2
				set_star_flag = nep_gpc_captain_swift
			}
		}
		random_rim_system = {
			spawn_system = {
				min_distance >= 20
				max_distance <= 40
				hyperlane = yes
				initializer = "nep_gpc_init_02"
			}
			random_system = {
				limit = { has_star_flag = nep_gpc_system_2 }
				remove_star_flag = nep_gpc_system_2
				set_star_flag = nep_gpc_cyrca
			}
		}
		set_spawn_system_batch = end
		country_event = { id = nep_gpc.40031 }
		country_event = { id = nep_gpc.40032 }
		country_event = { id = nep_gpc.40033 }
		country_event = { id = nep_gpc.40034 }
	}
	
	after = {
		every_playable_country = {
			country_event = { id = nep_gpc.40035 }
		}
	}
}

country_event = {
	id = nep_gpc.40031
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_system = {
			limit = { has_star_flag = nep_gpc_tawni_balfour }
			random_system_planet = {
				save_event_target_as = pirate_home
				create_country = {
					name = "NAME_nep_Tawni_Balfour"
					type = pirate
					species = event_target:nep_gpc_species_1
					name_list = "PRT1"
					flag = {
						background = {
							category = "backgrounds"
							file = "00_solid.dds"
						}
						colors ={
							"black"
							"black"
							"null"
							"null"
						}
					}
					effect = {
						save_event_target_as = pirate_band
					}
				}
				last_created_country = {
					create_leader = {
						class = admiral
						species = owner_main_species
						name = "NAME_nep_Tawni_Balfour"
						skill = 3
						traits = {
							trait = random_trait
							trait = random_trait
						}
					}
					create_fleet = {
						name = "NAME_nep_Tawni_Balfour"
						effect = {
							set_owner = event_target:pirate_band
							create_ship_design = {
								design = "NAME_Pirate_Galleon"
							}
							while = {
								count = 3
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							create_ship_design = {
								design = "NAME_Skull"
							}
							while = {
								count = 25
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							create_ship_design = {
								design = "NAME_Brigand"
							}
							while = {
								count = 25
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							assign_leader = last_created_leader
							set_location = {
								target = event_target:pirate_home
								distance = 10
								angle = random
							}
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = self
							set_aggro_range = 800
							set_fleet_flag = nep_gpc_tawni_balfour_fleet
						}
					}
					create_fleet = {
						name = "NAME_Pirate_Station"
						effect = {
							set_owner = event_target:pirate_band
							create_ship = {
								name = random
								design = "NAME_Pirate_Nest"
								graphical_culture = "pirate_01"
							}
							set_location = event_target:pirate_home
						}
					}
				}
				event_target:pirate_band = {
					randomize_flag_symbol = "pirate"
					every_country = {
						establish_communications_no_message = prev
					}
					set_country_flag = nep_gpc_tawni_balfour
				}
			}
		}
	}
}

country_event = {
	id = nep_gpc.40032
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_system = {
			limit = { has_star_flag = nep_gpc_pete_girly }
			random_system_planet = {
				save_event_target_as = pirate_home
				create_country = {
					name = "NAME_nep_Pete_Girly"
					type = pirate
					species = event_target:nep_gpc_species_1
					name_list = "PRT1"
					flag = {
						background = {
							category = "backgrounds"
							file = "00_solid.dds"
						}
						colors ={
							"black"
							"black"
							"null"
							"null"
						}
					}
					effect = {
						save_event_target_as = pirate_band
					}
				}
				last_created_country = {
					create_leader = {
						class = admiral
						species = owner_main_species
						name = "NAME_nep_Pete_Girly"
						skill = 4
						traits = {
							trait = random_trait							
							trait = random_trait
						}
					}
					create_fleet = {
						name = "NAME_nep_Pete_Girly"
						effect = {
							set_owner = event_target:pirate_band
							create_ship_design = {
								design = "NAME_Pirate_Galleon"
							}
							while = {
								count = 2
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							create_ship_design = {
								design = "NAME_Skull"
							}
							while = {
								count = 50
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							create_ship_design = {
								design = "NAME_Brigand"
							}
							while = {
								count = 30
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							assign_leader = last_created_leader
							set_location = {
								target = event_target:pirate_home
								distance = 10
								angle = random
							}
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = self
							set_aggro_range = 800
							set_fleet_flag = nep_gpc_pete_girly_fleet
						}
					}
					create_fleet = {
						name = "NAME_Pirate_Station"
						effect = {
							set_owner = event_target:pirate_band
							create_ship = {
								name = random
								design = "NAME_Pirate_Nest"
								graphical_culture = "pirate_01"
							}
							set_location = event_target:pirate_home
						}
					}
				}
				event_target:pirate_band = {
					randomize_flag_symbol = "pirate"
					every_country = {
						establish_communications_no_message = prev
					}
					set_country_flag = nep_gpc_pete_girly
				}
			}
		}
	}
}

country_event = {
	id = nep_gpc.40033
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_system = {
			limit = { has_star_flag = nep_gpc_captain_swift }
			random_system_planet = {
				save_event_target_as = pirate_home
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						trait = trait_very_strong
						trait = trait_nomadic
						trait = random_traits
					}
				}
				last_created_species = {
					save_event_target_as = nep_gpc_species_2			
				}
				create_country = {
					name = "NAME_nep_Captain_Swift"
					type = pirate
					species = event_target:nep_gpc_species_2
					name_list = "PRT1"
					flag = {
						background = {
							category = "backgrounds"
							file = "00_solid.dds"
						}
						colors ={
							"black"
							"black"
							"null"
							"null"
						}
					}
					effect = {
						save_event_target_as = pirate_band
					}
				}
				last_created_country = {
					create_leader = {
						class = admiral
						species = owner_main_species
						name = "NAME_nep_Captain_Swift"
						skill = 6
						traits = {
							trait = random_trait
							trait = random_trait
						}
					}
					create_fleet = {
						name = "NAME_nep_Captain_Swift"
						effect = {
							set_owner = event_target:pirate_band
							create_ship_design = {
								design = "NAME_Pirate_Galleon"
							}
							while = {
								count = 5
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							create_ship_design = {
								design = "NAME_Corsair"
							}
							while = {
								count = 8
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							create_ship_design = {
								design = "NAME_Black_Earl"
							}
							while = {
								count = 20
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							assign_leader = last_created_leader
							set_location = {
								target = event_target:pirate_home
								distance = 10
								angle = random
							}
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = self
							set_aggro_range = 800
							set_fleet_flag = nep_gpc_captain_swift_fleet
						}
					}
					create_fleet = {
						name = "NAME_Pirate_Station"
						effect = {
							set_owner = event_target:pirate_band
							create_ship = {
								name = random
								design = "NAME_Pirate_Nest"
								graphical_culture = "pirate_01"
							}
							set_location = event_target:pirate_home
						}
					}
				}
				event_target:pirate_band = {
					randomize_flag_symbol = "pirate"
					every_country = {
						establish_communications_no_message = prev
					}
					set_country_flag = nep_gpc_captain_swift
				}
			}
		}
	}
}


country_event = {
	id = nep_gpc.40034
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_system = {
			limit = { has_star_flag = nep_gpc_cyrca }
			random_system_planet = {
				save_event_target_as = pirate_home
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						trait = trait_very_strong
						trait = trait_nomadic
						trait = random_traits
					}
				}
				last_created_species = {
					save_event_target_as = nep_gpc_species_2			
				}
				create_country = {
					name = "NAME_nep_Cyrca"
					type = pirate
					species = event_target:nep_gpc_species_2
					name_list = "PRT1"
					flag = {
						background = {
							category = "backgrounds"
							file = "00_solid.dds"
						}
						colors ={
							"black"
							"black"
							"null"
							"null"
						}
					}
					effect = {
						save_event_target_as = pirate_band
					}
				}
				last_created_country = {
					create_leader = {
						class = admiral
						species = owner_main_species
						name = "NAME_nep_Cyrca"
						skill = 3
						traits = {
							trait = random_trait
							trait = random_trait
						}
					}
					create_fleet = {
						name = "NAME_nep_Cyrca"
						effect = {
							set_owner = event_target:pirate_band
							create_ship_design = {
								design = "NAME_Pirate_Galleon"
							}
							while = {
								count = 1
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							create_ship_design = {
								design = "NAME_Skull"
							}
							while = {
								count = 50
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							create_ship_design = {
								design = "NAME_Brigand"
							}
							while = {
								count = 50
								create_ship = {
									name = random
									design = last_created_design
									graphical_culture = "pirate_01"
								}
							}
							assign_leader = last_created_leader
							set_location = {
								target = event_target:pirate_home
								distance = 10
								angle = random
							}
							set_fleet_stance = aggressive
							set_aggro_range_measure_from = self
							set_aggro_range = 800
							set_fleet_flag = nep_gpc_cyrca_fleet
						}
					}
					create_fleet = {
						name = "NAME_Pirate_Station"
						effect = {
							set_owner = event_target:pirate_band
							create_ship = {
								name = random
								design = "NAME_Pirate_Nest"
								graphical_culture = "pirate_01"
							}
							set_location = event_target:pirate_home
						}
					}
				}
				event_target:pirate_band = {
					randomize_flag_symbol = "pirate"
					every_country = {
						establish_communications_no_message = prev
					}
					set_country_flag = nep_gpc_cyrca
				}
			}
		}
	}
}

country_event = {
	id = nep_gpc.40035
	title = nep_gpc.40035.name
	desc = nep_gpc.40035.desc
	picture = GFX_evt_pirate_armada
		
	is_triggered_only = yes
	
	immediate = {
		random_system = {
			limit = { has_star_flag = nep_gpc_tawni_balfour }
			random_system_planet = {
				limit = { is_star = yes }
				save_event_target_as = nep_gpc_tawni_balfour_system
			}
		}
		random_system = {
			limit = { has_star_flag = nep_gpc_pete_girly }
			random_system_planet = {
				limit = { is_star = yes }
				save_event_target_as = nep_gpc_pete_girly_system
			}
		}
		random_system = {
			limit = { has_star_flag = nep_gpc_captain_swift }
			random_system_planet = {
				limit = { is_star = yes }
				save_event_target_as = nep_gpc_captain_swift_system
			}
		}
		random_system = {
			limit = { has_star_flag = nep_gpc_cyrca }
			random_system_planet = {
				limit = { is_star = yes }
				save_event_target_as = nep_gpc_cyrca_system
			}
		}
	}
	
	option = {
		name = nep_gpc.40035.a
		begin_event_chain = { event_chain = nep_gpc_chain target = root }		
		create_point_of_interest = {
			id = nep_gpc_poi.1
			name = "nep_gpc_tawni_balfour_poi_name"
			desc = "nep_gpc_tawni_balfour_poi_desc"
			event_chain = nep_gpc_chain
			location = event_target:nep_gpc_tawni_balfour_system
		}
		create_point_of_interest = {
			id = nep_gpc_poi.2
			name = "nep_gpc_pete_girly_poi_name"
			desc = "nep_gpc_pete_girly_poi_desc"
			event_chain = nep_gpc_chain
			location = event_target:nep_gpc_pete_girly_system
		}
		create_point_of_interest = {
			id = nep_gpc_poi.3
			name = "nep_gpc_captain_swift_poi_name"
			desc = "nep_gpc_captain_swift_poi_desc"
			event_chain = nep_gpc_chain
			location = event_target:nep_gpc_captain_swift_system
		}
		create_point_of_interest = {
			id = nep_gpc_poi.4
			name = "nep_gpc_cyrca_poi_name"
			desc = "nep_gpc_cyrca_poi_desc"
			event_chain = nep_gpc_chain
			location = event_target:nep_gpc_cyrca_system
		}
	}
}

#on_entering_system
ship_event = {
	id = nep_gpc.4004
	title = nep_gpc.4004.name
	desc = {
		trigger = { 
			from = { 
				has_star_flag = nep_gpc_tawni_balfour
				any_ship_in_system = {
					fleet = {
						has_fleet_flag = nep_gpc_tawni_balfour_fleet
					}
				}
			} 
		}
		text = nep_gpc.4004.desc.a
	}
	desc = {
		trigger = { 
			from = { 
				has_star_flag = nep_gpc_tawni_balfour
				NOT = {
					any_ship_in_system = {
						fleet = {
							has_fleet_flag = nep_gpc_tawni_balfour_fleet
						}
					}
				}
			} 
		}
		text = nep_gpc.4004.desc.a2
	}
	desc = {
		trigger = { 
			from = { 
				has_star_flag = nep_gpc_pete_girly
				any_ship_in_system = {
					fleet = {
						has_fleet_flag = nep_gpc_pete_girly_fleet
					}
				}
			} 
		}
		text = nep_gpc.4004.desc.b
	}
	desc = {
		trigger = { 
			from = { 
				has_star_flag = nep_gpc_pete_girly
				NOT = {
					any_ship_in_system = {
						fleet = {
							has_fleet_flag = nep_gpc_pete_girly_fleet
						}
					}
				}
			} 
		}
		text = nep_gpc.4004.desc.b2
	}
	desc = {
		trigger = { 
			from = { 
				has_star_flag = nep_gpc_captain_swift 
				any_ship_in_system = {
					fleet = {
						has_fleet_flag = nep_gpc_captain_swift_fleet
					}
				}
			}				
		}
		text = nep_gpc.4004.desc.c
	}
	desc = {
		trigger = { 
			from = { 
				has_star_flag = nep_gpc_captain_swift 
				NOT = {
					any_ship_in_system = {
						fleet = {
							has_fleet_flag = nep_gpc_captain_swift_fleet
						}
					}
				}
			}
		}
		text = nep_gpc.4004.desc.c2
	}
	desc = {
		trigger = { 
			from = { 
				has_star_flag = nep_gpc_cyrca 
				any_ship_in_system = {
					fleet = {
						has_fleet_flag = nep_gpc_cyrca_fleet
					}
				}				
			} 
		}
		text = nep_gpc.4004.desc.d
	}
	desc = {
		trigger = { 
			from = { 
				has_star_flag = nep_gpc_cyrca 
				NOT = {
					any_ship_in_system = {
						fleet = {
							has_fleet_flag = nep_gpc_cyrca_fleet
						}
					}
				}
			} 
		}
		text = nep_gpc.4004.desc.d2
	}
	picture = GFX_evt_pirate_armada
		
	is_triggered_only = yes
	
	trigger = {
		fromfrom = { is_ai = no }
		has_global_flag = nep_gpc_pirate_waves
		from = {
			OR = {
				has_star_flag = nep_gpc_tawni_balfour
				has_star_flag = nep_gpc_pete_girly
				has_star_flag = nep_gpc_captain_swift
				has_star_flag = nep_gpc_cyrca
			}
		}
		fromfrom = {
			NOR = {
				has_country_flag = nep_gpc_tawni_balfour_met
				has_country_flag = nep_gpc_pete_girly_met
				has_country_flag = nep_gpc_captain_swift_met
				has_country_flag = nep_gpc_cyrca_met
			}
		}
	}
	
	immediate = {
		if = {
			limit = { from = { has_star_flag = nep_gpc_tawni_balfour } }
			fromfrom = { set_country_flag = nep_gpc_tawni_balfour_met }
		}
		if = {
			limit = { from = { has_star_flag = nep_gpc_pete_girly } }
			fromfrom = { set_country_flag = nep_gpc_pete_girly_met }
		}
		if = {
			limit = { from = { has_star_flag = nep_gpc_captain_swift } }
			fromfrom = { set_country_flag = nep_gpc_captain_swift_met }
		}
		if = {
			limit = { from = { has_star_flag = nep_gpc_cyrca } }
			fromfrom = { set_country_flag = nep_gpc_cyrca_met }
		}
	}
	
	option = {
		name = nep_gpc.4004.a
	}
}

#on_fleet_destroyed_perp
country_event = {
	id = nep_gpc.4005
	title = nep_gpc.4005.name
	desc = {
		trigger = { from = { has_country_flag = nep_gpc_tawni_balfour } }
		text = nep_gpc.4005.desc.a
	}
	desc = {
		trigger = { from = { has_country_flag = nep_gpc_pete_girly } }
		text = nep_gpc.4005.desc.b
	}
	desc = {
		trigger = { from = { has_country_flag = nep_gpc_captain_swift } }
		text = nep_gpc.4005.desc.c
	}
	desc = {
		trigger = { from = { has_country_flag = nep_gpc_cyrca } }
		text = nep_gpc.4005.desc.d
	}
	picture = GFX_evt_large_explosion
		
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_gpc_pirate_waves
		from = {
			OR = {
				has_country_flag = nep_gpc_tawni_balfour
				has_country_flag = nep_gpc_pete_girly
				has_country_flag = nep_gpc_captain_swift
				has_country_flag = nep_gpc_cyrca
			}
		}
		fromfromfrom = {
			NOT = { is_ship_size = pirate_station }
		}
	}
	
	immediate = {
		if = {
			limit = { from = { has_country_flag = nep_gpc_tawni_balfour } }
			root = { set_country_flag = nep_gpc_tawni_balfour_clue_get }
		}
		if = {
			limit = { from = { has_country_flag = nep_gpc_pete_girly } }
			root = { set_country_flag = nep_gpc_pete_girly_clue_get }
		}
		if = {
			limit = { from = { has_country_flag = nep_gpc_captain_swift } }
			root = { set_country_flag = nep_gpc_captain_swift_clue_get }
		}
		if = {
			limit = { from = { has_country_flag = nep_gpc_cyrca } }
			root = { set_country_flag = nep_gpc_cyrca_clue_get }
		}
	}
	
	option = {
		name = nep_gpc.4005.a
		add_event_chain_counter = {
			event_chain = "nep_gpc_chain"
			counter = "nep_gpc_clues"
			amount = 1			
		}
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = nep_gpc_tawni_balfour_clue_get
				}
				remove_point_of_interest = nep_gpc_poi.1
			}
			if = {
				limit = {
					has_country_flag = nep_gpc_pete_girly_clue_get
				}
				remove_point_of_interest = nep_gpc_poi.2
			}
			if = {
				limit = {
					has_country_flag = nep_gpc_captain_swift_clue_get
				}
				remove_point_of_interest = nep_gpc_poi.3
			}
			if = {
				limit = {
					has_country_flag = nep_gpc_cyrca_clue_get
				}
				remove_point_of_interest = nep_gpc_poi.4
			}
			if = {
				limit = {
					has_country_flag = nep_gpc_tawni_balfour_clue_get
					has_country_flag = nep_gpc_pete_girly_clue_get
					has_country_flag = nep_gpc_captain_swift_clue_get
					has_country_flag = nep_gpc_cyrca_clue_get
				}
				country_event = { id = nep_gpc.5 }
			}
		}
	}
}


fleet_event = {
	id = nep_gpc.40051
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_gpc_pirate_waves
		OR = {
			AND = {
				from = { has_star_flag = nep_gpc_tawni_balfour }
				any_country = { has_country_flag = nep_gpc_tawni_balfour_clue_get }
				owner = { NOT = { has_country_flag = nep_gpc_tawni_balfour_clue_get } }
			}
			AND = {
				from = { has_star_flag = nep_gpc_pete_girly }
				any_country = { has_country_flag = nep_gpc_pete_girly_clue_get }
				owner = { NOT = { has_country_flag = nep_gpc_pete_girly_clue_get } }
			}
			AND = {
				from = { has_star_flag = nep_gpc_captain_swift }
				any_country = { has_country_flag = nep_gpc_captain_swift_clue_get }
				owner = { NOT = { has_country_flag = nep_gpc_captain_swift_clue_get } }
			}
			AND = {
				from = { has_star_flag = nep_gpc_cyrca }
				any_country = { has_country_flag = nep_gpc_cyrca_clue_get }
				owner = { NOT = { has_country_flag = nep_gpc_cyrca_clue_get } }
			}
		}
	}
	
	immediate = {
		owner = { country_event = { id = nep_gpc.40052 days = 40 } }
	}
}

country_event = {
	id = nep_gpc.40052
	title = nep_gpc.40052.name
	desc = {
		trigger = { fromfrom = { has_star_flag = nep_gpc_tawni_balfour } }
		text = nep_gpc.40052.desc.a
	}
	desc = {
		trigger = { fromfrom = { has_star_flag = nep_gpc_pete_girly } }
		text = nep_gpc.40052.desc.b
	}
	desc = {
		trigger = { fromfrom = { has_star_flag = nep_gpc_captain_swift } }
		text = nep_gpc.40052.desc.c
	}
	desc = {
		trigger = { fromfrom = { has_star_flag = nep_gpc_cyrca } }
		text = nep_gpc.40052.desc.d
	}
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_gpc_pirate_waves
		from = {
			exists = solar_system
			solar_system = {
				is_same_value = root.fromfrom
			}
		}
	}
	
	immediate = {
		if = {
			limit = { fromfrom = { has_star_flag = nep_gpc_tawni_balfour } }
			root = { set_country_flag = nep_gpc_tawni_balfour_clue_get }
		}
		if = {
			limit = { fromfrom = { has_star_flag = nep_gpc_pete_girly } }
			root = { set_country_flag = nep_gpc_pete_girly_clue_get }
		}
		if = {
			limit = { fromfrom = { has_star_flag = nep_gpc_captain_swift } }
			root = { set_country_flag = nep_gpc_captain_swift_clue_get }
		}
		if = {
			limit = { fromfrom = { has_star_flag = nep_gpc_cyrca } }
			root = { set_country_flag = nep_gpc_cyrca_clue_get }
		}
		
	}
	
	option = {
		name = nep_gpc.40052.a
		add_event_chain_counter = {
			event_chain = "nep_gpc_chain"
			counter = "nep_gpc_clues"
			amount = 1			
		}
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = nep_gpc_tawni_balfour_clue_get
				}
				remove_point_of_interest = nep_gpc_poi.1
			}
			if = {
				limit = {
					has_country_flag = nep_gpc_pete_girly_clue_get
				}
				remove_point_of_interest = nep_gpc_poi.2
			}
			if = {
				limit = {
					has_country_flag = nep_gpc_captain_swift_clue_get
				}
				remove_point_of_interest = nep_gpc_poi.3
			}
			if = {
				limit = {
					has_country_flag = nep_gpc_cyrca_clue_get
				}
				remove_point_of_interest = nep_gpc_poi.4
			}
			if = {
				limit = {
					has_country_flag = nep_gpc_tawni_balfour_clue_get
					has_country_flag = nep_gpc_pete_girly_clue_get
					has_country_flag = nep_gpc_captain_swift_clue_get
					has_country_flag = nep_gpc_cyrca_clue_get
				}
				country_event = { id = nep_gpc.5 }
			}
		}
	}
}

country_event = {
	id = nep_gpc.4010
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_gpc_pirate_waves		
	}
	
	immediate = {
		random_system = {
			limit = { NOT = { exists = space_owner } }
			closest_system = {
				limit = { exists = space_owner }
				space_owner = {
					species = {
						save_event_target_as = nep_4010_temp
					}
				}
			}
			random_system_planet = {
				save_event_target_as = pirate_home
				create_country = {
					name = "NAME_Pirates"
					type = pirate
					species = event_target:nep_4010_temp
					name_list = "PRT1"
					flag = {
						background = {
							category = "backgrounds"
							file = "00_solid.dds"
						}
						colors ={
							"black"
							"black"
							"null"
							"null"
						}
					}
					effect = {
						save_event_target_as = pirate_band
					}
				}
				last_created_country = {
					create_leader = {
						class = admiral
						species = owner_main_species
						name = random
						skill = 1
						traits = {
							trait = random_trait
							trait = random_trait
						}
					}
					random_list = {
						1 = {
							create_fleet = {
								name = "NAME_Young_Blood"
								effect = {
									set_owner = event_target:pirate_band
									create_ship_design = {
										design = "NAME_Reaver"
									}
									while = {
										count = 12
										create_ship = {
											name = random
											design = last_created_design
											graphical_culture = "pirate_01"
										}
									}
									set_location = {
										target = event_target:pirate_home
										distance = 90
										angle = 200
									}									
									assign_leader = last_created_leader
									set_fleet_stance = aggressive
									set_aggro_range_measure_from = self
									set_aggro_range = 150
								}
							}
						}
						1 = {
							create_fleet = {
								name = "NAME_Scarred_Veterans"
								effect = {
									set_owner = event_target:pirate_band
									while = {
										count = 6
										create_ship = {
											name = random
											design = "NAME_Corsair"
											graphical_culture = "pirate_01"
										}
									}
									while = {
										count = 10
										create_ship = {
											name = random
											design = "NAME_Marauder"
											graphical_culture = "pirate_01"
										}
									}
									while = {
										count = 20
										create_ship = {
											name = random
											design = "NAME_Black_Earl"
											graphical_culture = "pirate_01"
										}
									}
									while = {
										count = 4
										create_ship = {
											name = random
											design = "NAME_Skull"
											graphical_culture = "pirate_01"
										}
									}
									assign_leader = last_created_leader
									set_formation_scale = 2
									set_fleet_stance = aggressive
									set_aggro_range_measure_from = self
									set_aggro_range = 250
									set_location = {
										target = event_target:pirate_home
										distance = 90
										angle = 120
									}
								}
							}
						}
						1 = {
							create_fleet = {
								name = "NAME_Old_Guard"
								effect = {
									set_owner = event_target:pirate_band
									while = {
										count = 1
										create_ship = {
											name = random
											design = "NAME_Pirate_Galleon"
											graphical_culture = "pirate_01"
										}
									}
									assign_leader = last_created_leader
									set_fleet_stance = aggressive
									set_aggro_range_measure_from = self
									set_aggro_range = 250
									set_location = {
										target = event_target:pirate_home
										distance = 90
										angle = 330
									}
								}
							}
						}
					}
					create_fleet = {
						name = "NAME_Pirate_Station"
						effect = {
							set_owner = event_target:pirate_band
							create_ship = {
								name = random
								design = "NAME_Pirate_Nest"
								graphical_culture = "pirate_01"
							}
							set_location = event_target:pirate_home
						}
					}
				}
				event_target:pirate_band = {
					set_name = random
					randomize_flag_symbol = "pirate"
					every_country = {
						establish_communications_no_message = prev
					}
				}
			}
		}
	}
}

country_event = {
	id = nep_gpc.4099
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_gpc_pirate_waves
	}
	
	immediate = {
		remove_global_flag = nep_gpc_pirate_waves
		every_playable_country = {
			country_event = { id = nep_gpc.40990 }
		}
	}
}

country_event = {
	id = nep_gpc.40990
	title = nep_gpc.40990.name
	desc = nep_gpc.40990.desc
	picture = GFX_evt_pirate_armada
		
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = nep_gpc.40990.a
		remove_modifier = nep_gpc_piracy
		add_monthly_resource_mult = {
			resource = unity
			value = 10
			min = 200
			max = 9999
		}
	}
}

country_event = {
	id = nep_gpc.5
	title = nep_gpc.5.name
	desc = nep_gpc.5.desc
	picture = GFX_evt_pirate_armada
	
	is_triggered_only = yes
	
	immediate = {
		random_rim_system = {
			random_system_planet = {
				save_event_target_as = nep_gpc_target
			}
		}
	}
	
	option = {
		name = nep_gpc.5.a
		enable_special_project = {
			name = "nep_gpc_project"
			location = event_target:nep_gpc_target
			owner = root
		}
	}
}

ship_event = {
	id = nep_gpc.6000
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		solar_system = {		
			spawn_system = {
				min_distance >= 20
				max_distance <= 40
				hyperlane = no
				initializer = "nep_gpc_init_03"
			}
			random_system = {
				limit = { has_star_flag = nep_gpc_system_3 }
				save_event_target_as = nep_gpc_6000_temp
			}
			add_hyperlane = { from = event_target:nep_gpc_6000_temp to = this }
		}
	}
}

country_event = {
	id = nep_gpc.6
	title = nep_gpc.6.name
	desc = nep_gpc.6.desc
	picture = GFX_evt_pirate_armada
	
	is_triggered_only = yes
	
	immediate = {
		every_playable_country = {
			limit = { has_event_chain = nep_gpc_chain }
			end_event_chain = nep_gpc_chain			
		}
	}
	
	option = {
		name = nep_gpc.6.a
	}
}

#on_fleet_destroyed_perp
country_event = {
	id = nep_gpc.6001
	title = nep_gpc.6001.name
	desc = nep_gpc.6001.desc
	picture = GFX_evt_exploding_ship
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	trigger = {
		fromfromfrom = {
			has_fleet_flag = nep_gpc_machine_gun_fort
		}
	}
	
	immediate = {
		
	}
	
	option = {
		name = nep_gpc.6001.a
		random_planet = {
			limit = { has_planet_flag = nep_gpc_base }
			create_archaeological_site = nep_gpc_site
		}
	}
}

fleet_event = {
	id = nep_gpc.6002
	title = "nep_gpc.6002.name"
	desc = "nep_gpc.6002.desc"
	picture = GFX_evt_overgrown_city
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = DIG
		owner = {
			add_resource = {
				alloys = 50
			}
		}
	}
}


fleet_event = {
	id = nep_gpc.6003
	title = "nep_gpc.6003.name"
	desc = "nep_gpc.6003.desc"
	picture = GFX_evt_overgrown_city
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = nep_gpc.6003.a #open the door
		owner = {
			add_resource = {
				energy = -500
			}
		}
	}
}


fleet_event = {
	id = nep_gpc.7
	title = "nep_gpc.7.name"
	desc = "nep_gpc.7.desc"
	picture = GFX_evt_overgrown_city
	
	archaeology = yes
	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = nep_gpc.7.a
		owner = { 
			add_relic = r_nep_alchemist_box
			large_artifact_reward = yes
			remove_modifier = nep_gpc_piracy
		}
		hidden_effect = {
			remove_global_flag = nep_gpc_pirate_waves
			every_playable_country = {
				limit = { NOT = { is_same_value = root.owner } }
				country_event = { id = nep_gpc.7000 }
			}
			set_global_flag = nep_gpc_end
		}
	}
}

country_event = {
	id = nep_gpc.7000
	title = nep_gpc.7000.name
	desc = nep_gpc.7000.desc
	picture = GFX_evt_news_room
		
	is_triggered_only = yes
	
	immediate = { }
	
	option = {
		name = nep_gpc.7000.a
		remove_modifier = nep_gpc_piracy
	}
}
###############################################
# Universal Amusement Park
###############################################
namespace = nep_uap
ship_event = {
	id = nep_uap.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {

	}
}

###############################################
# Space Race
###############################################
namespace = nep_spacerace
ship_event = {
	id = nep_spacerace.1
	hide_window = yes
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {

	}
}